<ng-container *ngIf="state$ | async as state">
  <ng-container *ngIf="state.pokemon">
    <form [formGroup]="form" class="text-sm flex flex-col items-start gap-y-2 p-2 rounded border">
      <div class="flex flex-row items-end gap-x-2">
        <pokemon-select formControlName="pokemon"></pokemon-select>
        <pokemon-yakkun-link [pokemon]="state.pokemon" class="my-1"></pokemon-yakkun-link>
      </div>
      <div class="flex flex-row flex-wrap items-end">
        <table class="border-spacing-x-2">
          <thead>
            <tr class="text-left">
              <th class="font-normal">実数値</th>
              <th class="font-normal">努力値</th>
              <th class="font-normal">個体値</th>
              <th class="font-normal">性格</th>
            </tr>
          </thead>
          <tbody>
            <tr formGroupName="stats">
              <td>
                <stat-input
                  formControlName="stat"
                  [isMin]="state.stats.ev === 0"
                  [isMax]="state.stats.ev === 252"
                ></stat-input>
              </td>
              <td><ev-input formControlName="ev" [usedEVs]="state.stats.ev"></ev-input></td>
              <td><iv-input formControlName="iv" [disableNull]="true"></iv-input></td>
              <td>
                <select formControlName="nature" class="form-select">
                  <option [ngValue]="'up'">↑</option>
                  <option [ngValue]="'neutral'">-</option>
                  <option [ngValue]="'down'">↓</option>
                </select>
              </td>
            </tr>
          </tbody>
        </table>
        <speed-presets class="mt-2"></speed-presets>
      </div>
    </form>
  </ng-container>
</ng-container>
